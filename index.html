<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Folders Upload</title>
  </head>
  <body>
    <input type="file" webkitdirectory />
    <button>Upload</button>
  </body>
  <script>
    const input = document.querySelector("input");
    const button = document.querySelector("button");

    button.addEventListener("click", async () => {
      for (let file of input.files) {
        await sendData(file);
        console.log("Sending...", file);
      }
    });

    function sendData(file) {
      const formData = new FormData();
      formData.append("file", file);
      const BASE_URL = "http://127.0.0.1:3333";
      fetch(`${BASE_URL}/upload`, { method: "POST", body: formData });
      console.log("Enviando arquivo...");
    }
  </script>
</html>
